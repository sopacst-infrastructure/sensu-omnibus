FROM centos:centos6

RUN yum clean all
RUN yum install -y epel-release
RUN yum clean all
RUN yum install -y autoconf268 curl m4 make gcc gcc-c++ rpm-build zlib-devel openssl-devel libyaml-devel git libffi-devel

RUN mkdir -p /usr/src/ruby \
    && curl -L https://cache.ruby-lang.org/pub/ruby/2.4/ruby-2.4.2.tar.bz2 | tar -xjC /usr/src/ruby --strip-components=1 \
    && cd /usr/src/ruby \
    && autoconf268 \
    && ./configure \
    && make \
    && make install \
    && rm -r /usr/src/ruby

RUN gem update --system

RUN yum install http://rpms.ph.ed.ac.uk/devolved/phys/sl6_64/rpms/git18-1.8.4-1.phys.x86_64.rpm -y

ADD archive.tar /sensu-build
